{% extends "base.html" %}
{% set active_page = 'account' %}

{% block title %}Account Settings - Daylily Customer Portal{% endblock %}

{% block content %}
<div class="container">
    <!-- Page Header -->
    <div class="page-header">
        <h1 class="page-title">Account Settings</h1>
        <p class="page-subtitle">Manage your account information and preferences</p>
    </div>
    
    <div class="grid grid-2 gap-xl">
        <!-- Profile Information -->
        <div class="card">
            <h3 class="card-title"><i class="fas fa-user"></i> Profile Information</h3>
            <form id="profile-form">
                <div class="form-group">
                    <label class="form-label">Customer Name</label>
                    <input type="text" class="form-control" value="{{ customer.customer_name | default('') }}" readonly>
                </div>
                <div class="form-group">
                    <label class="form-label">Email Address</label>
                    <input type="email" class="form-control" value="{{ customer.email | default('') }}" readonly>
                </div>
                <div class="form-group">
                    <label class="form-label">Customer ID</label>
                    <input type="text" class="form-control" value="{{ customer.customer_id | default('') }}" readonly>
                    <small class="form-help">This is your unique identifier in the system</small>
                </div>
                <div class="form-group">
                    <label class="form-label">S3 Bucket</label>
                    <input type="text" class="form-control" value="{{ customer.s3_bucket | default('') }}" readonly>
                </div>
            </form>
        </div>
        
        <!-- Resource Quotas -->
        <div class="card">
            <h3 class="card-title"><i class="fas fa-tachometer-alt"></i> Resource Quotas</h3>
            <div class="mb-lg">
                <div class="d-flex justify-between mb-sm">
                    <span>Max Concurrent Worksets</span>
                    <span class="text-bold">{{ customer.max_concurrent_worksets | default(10) }}</span>
                </div>
                <div class="progress">
                    <div class="progress-bar primary" style="width: 0%"></div>
                </div>
            </div>
            <div class="mb-lg">
                <div class="d-flex justify-between mb-sm">
                    <span>Storage Quota</span>
                    <span class="text-bold">{{ customer.max_storage_gb | default(500) }} GB</span>
                </div>
                <div class="progress">
                    <div class="progress-bar primary" style="width: 0%"></div>
                </div>
            </div>
            <p class="text-muted text-sm">
                <i class="fas fa-info-circle"></i>
                Contact support to request quota increases.
            </p>
        </div>
        
        <!-- Billing Information -->
        <div class="card">
            <h3 class="card-title"><i class="fas fa-credit-card"></i> Billing Information</h3>
            <dl style="margin: 0;">
                <div class="d-flex justify-between mb-md">
                    <dt class="text-muted">Billing Account ID</dt>
                    <dd>{{ customer.billing_account_id | default('Not configured') }}</dd>
                </div>
                <div class="d-flex justify-between mb-md">
                    <dt class="text-muted">Cost Center</dt>
                    <dd>{{ customer.cost_center | default('N/A') }}</dd>
                </div>
                <div class="d-flex justify-between mb-md">
                    <dt class="text-muted">Created</dt>
                    <dd>{{ customer.created_at | default('Unknown') }}</dd>
                </div>
            </dl>
            <a href="/portal/usage" class="btn btn-outline mt-md">
                <i class="fas fa-chart-line"></i> View Usage & Billing
            </a>
        </div>
        
        <!-- Security Settings -->
        <div class="card">
            <h3 class="card-title"><i class="fas fa-shield-alt"></i> Security</h3>
            <div class="mb-lg">
                <h4 class="text-md mb-sm">Password</h4>
                <p class="text-muted text-sm mb-md">Last changed: Never</p>
                <button class="btn btn-outline" onclick="showChangePassword()">
                    <i class="fas fa-key"></i> Change Password
                </button>
            </div>
            <div class="mb-lg">
                <h4 class="text-md mb-sm">API Access</h4>
                <p class="text-muted text-sm mb-md">Generate API tokens for programmatic access</p>
                <button class="btn btn-outline" onclick="showApiTokens()">
                    <i class="fas fa-code"></i> Manage API Tokens
                </button>
            </div>
        </div>
    </div>
    
    <!-- Danger Zone -->
    <div class="card mt-xl" style="border-color: var(--error);">
        <h3 class="card-title" style="color: var(--error);"><i class="fas fa-exclamation-triangle"></i> Danger Zone</h3>
        <p class="text-muted mb-md">Once you delete your account, there is no going back. Please be certain.</p>
        <button class="btn btn-danger" onclick="confirmDeleteAccount()">
            <i class="fas fa-trash"></i> Delete Account
        </button>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
function showChangePassword() {
    alert('Password change functionality coming soon. Please contact support.');
}

function showApiTokens() {
    alert('API token management coming soon. Please contact support.');
}

function confirmDeleteAccount() {
    if (confirm('Are you sure you want to delete your account? This action cannot be undone.')) {
        alert('Account deletion requires contacting support. Please email support@daylilyinformatics.com');
    }
}
</script>
{% endblock %}

